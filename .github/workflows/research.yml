name: research
on: push
jobs:
  bash-example:
    runs-on: ubuntu-latest
    steps:
      - name: Install CUDA
        uses: Jimver/cuda-toolkit@v0.2.29
        id: cuda-toolkit
        with:
          cuda: '12.5.0'
          method: 'network'  # https://github.com/Jimver/cuda-toolkit/issues/392#issuecomment-3311921753
      # https://docs.github.com/ja/actions/reference/workflows-and-actions/workflow-commands
      - name: Setup and Check OpenCL environment
        run: |
            echo "::group::clinfo関連インストール"
            echo "::notice::apt update"
            sudo apt-get update
            echo "::notice::clinfoのインストール"
            sudo apt-get install -y --no-install-recommends ocl-icd-libopencl1 clinfo
            echo "::endgroup::"
            echo "::group::OpenCL検査"
            clinfo
            echo "::endgroup::"
            echo "::group::pocl追加インストール"
            echo "::notice::poclのインストール"
            sudo apt-get install -y --no-install-recommends pocl-opencl-icd
            echo "::endgroup::"
            echo "::group::OpenCL検査"
            clinfo
            echo "::endgroup::"
